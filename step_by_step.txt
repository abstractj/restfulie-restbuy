rails new restbuy
cd restbuy
git init
rails g scaffold product name:string price:decimal
rails g model item product_id:integer quantity:integer order_id:integer
rails g scaffold order address:string state:string
rails g model payment value:decimal order_id:integer card_number:string card_holder:string state:string
gc "system models in place"


# jquery
curl -L http://code.jquery.com/jquery-1.4.2.min.js > public/javascripts/jquery.js
curl -L http://github.com/rails/jquery-ujs/raw/master/src/rails.js > public/javascripts/rails.js
curl -L http://github.com/cairesvs/formfy/raw/master/formfy.js > public/javascripts/formfy.js

# application.rb
descomenta a linha de javascript, adiciona formfy

config.action_controller.allow_forgery_protection    = false



rails g migration insert_sample_products
echo "class InsertSampleProducts < ActiveRecord::Migration
  def self.up
		Product.create :name => 'Apple macbook pro', :price => 1000
		Product.create :name => 'Rest Training (20h)', :price => 800
		Product.create :name => 'Modern Software architecture and Design (20h)', :price => 800
		Product.create :name => 'Ipad', :price => 600
		Product.create :name => 'Audi TT', :price => 40000
		Product.create :name => 'Flowers', :price => 20
  end

  def self.down
		Product.delete_all
  end
end" > db/migrate/*_insert_sample_products*

rake db:create db:migrate
gc "database created"

rails g controller System logout
rails g controller Payments create
rails g controller Admin index update_payment update_order



# PART 1: 15 minutes: tag 1-webbuy
Presenting a server:
- create
- pay
- admin: unpaid, refused, preparing
- admin: preparing -> delivering
- delivering -> delivered, failed to deliver
- cancel
- share payment between friends
- search

# PART 2: 15 minutes: tag 2-open-search
suporta opensearch, mostra cliente
curl http://localhost:3000/products/opensearch.xml
curl http://localhost:3000/products?q=apple\&format=atom
curl http://localhost:3000/products?q=\&format=atom

# client_spec.rb

# PART 3: 15 minutes: tag 3-create-basket
creates and redirects to the basket





















tag add product
adicionar produto a basket atraves de um form no basket

tag pay
pay eh preencher um form no basket

tag imprimir recibo
fica pigando de 10 em 10 secs e quando ok, imprime o recibo

tag retry-payment
fica pingando de 10 em 10 secs e retenta pagar com outros dados
tenta no maximo 3

tag cancel
se tentar 3 vezes e nao conseguir, cancela

tag failed-to-deliver
retenta no maximo 3 vezes

tag delivered
se pagou e imprimiu recibo, fica pingando de 10 em 10 secs ate delivered

tag calendar
mostra a data estimada de entrega no google calendar atraves de um link rel="calendar"

tag cancel
tenha um link chamado cancelar
basta clicar no link cancelar, ou no link basket ou no link receipt para ver essas coisas





event based, da pra fazer algo? que eu leio os deltas de mudancas?



use forms on creation



extensao push
suportar event notification via push e pusher

extensao callback
NAOOOOO< so comentar


extensao finances:
ask for auth from bank, use this auth to send to the guy, which authroizes with the bank
interface to try a second time




extensao usa opensearch para comprar em varios:
adicionar um outro site sem ser a "amazon"
escolhe o mais barato




extensao 5:
a propria "amazon" delega para outro produto, ganhando uma % de comissao
????????????????

extensao 6 (de graca):
produto sempre mostra reocmendacoes
calendario visualiza os produtos recomendados e similares
form com a basket para ja comprar essa recomendacao e qtdes



extensao 7:
cliente automatizado tambem olha recomendacoes antes de efetuar a compra e manda email com essas recomendacoes



AUTHorization
AUTHentication

